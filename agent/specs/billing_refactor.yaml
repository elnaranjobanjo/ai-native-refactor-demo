name: billing_refactor

objective: >
  Transform the legacy billing module into a modular,
  architecture driven design using pricing, discounts,
  taxes and shipping components.

functional_requirements:
  - Preserve exact output from legacy implementation.
  - Remove hardcoded constants.
  - Add type hints.
  - Separate responsibilities into modules.

architecture:
  modules:
    - pricing.py
    - discounts.py
    - shipping.py
    - taxes.py
    - compute.py

testing:
  cases:
    - input:
        - {type: product, price: 20, qty: 2}
        - {type: discount, value: 5}
      expected: 50.02
